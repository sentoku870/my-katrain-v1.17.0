# Phase 9 完了サマリー

> 作成日: 2025-12-31
> Phase: Phase 9（検証テンプレで改善ループ）

---

## 1. Phase 9 の目的

検証手順を固定し、同条件で比較できるようにする。

**達成状況**: ✅ **完了**

---

## 2. 成果物一覧

### 2.1 主要ドキュメント

| ファイル | 目的 | 状態 |
|---------|------|------|
| `docs/03-llm-validation.md` | LLM検証テンプレート（メイン） | ✅ 完了 |
| `docs/examples/workflow-example-01.md` | ウィークリーコーチのワークフロー例 | ✅ 完了 |
| `docs/examples/workflow-example-02.md` | デイリーコーチのワークフロー例 | ✅ 完了 |
| `docs/01-roadmap.md` | ロードマップ更新（Phase 9完了を反映） | ✅ 完了 |

### 2.2 各ドキュメントの内容

#### `docs/03-llm-validation.md`（440行）

**セクション構成**:
1. 前提知識（カルテの種類、LLMへの入力方法）
2. 検証サイクル（5ステップ）
3. ステップ詳細（カルテ生成、LLM診断、行動ルール策定、実践、再カルテ）
4. テンプレート集（初回診断、継続診断、デイリー振り返り）
5. 運用ルール
6. FAQ
7. 成功事例（想定）

**主要機能**:
- ✅ 5ステップ検証サイクルの定義
- ✅ プロンプトテンプレート（3種類）
- ✅ 行動ルール記録フォーマット
- ✅ 改善判定基準（改善/変化なし/悪化）
- ✅ 測定可能な成功条件の定義

#### `docs/examples/workflow-example-01.md`（215行）

**ワークフロー**:
- Day 1: 初回カルテ生成 + LLM診断 + 行動ルール策定
- Day 2-5: 5局実践（行動ルール v01 適用）
- Day 6: 再カルテ + 改善測定 + 次サイクル計画

**実例データ**:
- 初回: Middle gameの大悪手 8回、損失52.1目
- 5局後: Middle gameの大悪手 4回、損失22.3目
- 改善: 57%減（損失ベース）

#### `docs/examples/workflow-example-02.md`（216行）

**デイリーコーチの使い方**:
- 使用タイミング（重要な対局、ルール確認）
- 5分で完了するワークフロー（カルテ確認→LLM診断→簡易ログ）
- ウィークリーコーチとの組み合わせ方

---

## 3. 受け入れ条件の達成状況

| 受け入れ条件 | 達成 | 証跡 |
|------------|------|------|
| カルテ→LLM→行動ルール→実践→再カルテのサイクルが回る | ✅ | `03-llm-validation.md` セクション2 |
| 成功条件が測定可能（客観的な数値で判定） | ✅ | `03-llm-validation.md` セクション2.5 |
| 主テーマ1つ + 行動ルール最大3つに絞る設計 | ✅ | `03-llm-validation.md` セクション2.3 |
| ウィークリーコーチとデイリーコーチの使い分けが明確 | ✅ | `workflow-example-02.md` セクション4 |

---

## 4. 5ステップ検証サイクルの詳細

```
[1] カルテ生成（ウィークリー or デイリー）
      ↓
[2] LLM診断（弱点特定）
      ↓
[3] 行動ルール策定（最大3つ）
      ↓
[4] 実践（次の5局）
      ↓
[5] 再カルテ（改善を測定）
      ↓
   （サイクル継続）
```

### 各ステップの成果物

| ステップ | 成果物 | フォーマット |
|---------|--------|-------------|
| 1 | カルテ（`karte_*.md` or `summary_*.md`） | Markdown |
| 2 | LLM診断結果 | テキスト（保存任意） |
| 3 | 行動ルール（`action_rules_vXX.md`） | Markdown |
| 4 | 対局記録（`practice_log_vXX.md`） | Markdown（任意） |
| 5 | 再カルテ + 比較結果 | Markdown |

---

## 5. プロンプトテンプレート（3種類）

### 5.1 初回診断用プロンプト

**用途**: 直近10局のカルテから最初の行動ルールを策定

**出力形式**:
- 客観事実（カルテから抽出）× 3点
- 原因仮説 × 最大2つ
- 主テーマ × 1つ
- 行動ルール × 最大3つ
- 成功条件 × 2つ

### 5.2 継続診断用プロンプト

**用途**: 5局実践後の再カルテで改善を判定

**出力形式**:
- 改善/変化なし/悪化の判定
- 次の5局の行動ルール（継続 or 見直し）

### 5.3 デイリー振り返り用プロンプト

**用途**: 対局直後の即座の振り返り（5分）

**出力形式**:
- 良かった点 × 1つ（20-30文字）
- 改善点 × 1つ（20-30文字）

---

## 6. 改善判定基準

| 判定 | 条件 | 次のアクション |
|------|------|---------------|
| 改善 | 成功条件を1つ以上達成 & 損失10%以上減少 | 行動ルール継続 + 新弱点追加 |
| 変化なし | 成功条件未達 & 損失変化±10%以内 | 行動ルール見直し（LLM再診断） |
| 悪化 | 損失10%以上増加 | 行動ルール中止、別弱点に焦点 |

---

## 7. 実例（想定効果）

### 初回カルテ
- Middle gameの大悪手: 8回、損失52.1目

### 行動ルール v01
1. 戦いの前に「自分の石は安全か？」を確認
2. 相手の弱点（呼吸点2以下）を見つけてから動く
3. 読みが不安なら、まず連絡・補強を優先

### 5局後のカルテ
- Middle gameの大悪手: 3回、損失18.5目

### 判定
**改善**（損失64%減）

### 次のアクション
- 行動ルール v01 を継続
- 新しい弱点（Openingの悪手）に焦点を追加
- 行動ルール v02 を策定

---

## 8. 運用の重要原則

### 8.1 カルテの軽さを維持
- カルテは「LLMに貼るための、軽くて客観的な証拠」
- 重要局面TopN + 集計だけで、PV（変化）は原則入れない

### 8.2 学習ループを回す
- カルテ → 課題特定 → 行動ルール → 5局実践 → 再カルテ
- 1回の相談で「主テーマ1つ + 行動ルール最大3つ」に絞る

### 8.3 主観とデータのズレを確認
- 「序盤が弱い」と思っていても、データで中盤の損失が3倍多いことがある
- カルテの客観データを優先し、主観は仮説として扱う

### 8.4 複数の弱点を同時に直さない
- 人間は同時に2つ以上のことを意識できない
- 最も損失が大きい弱点1つに絞る

---

## 9. デイリーコーチとウィークリーコーチの使い分け

| 機能 | タイミング | 用途 | 所要時間 |
|------|-----------|------|----------|
| ウィークリーコーチ | 10局ごと | 傾向分析、行動ルール策定 | 30分 |
| デイリーコーチ | 重要な対局直後 | ルール遵守確認、即座の振り返り | 5分 |

### 使い分けの指針

- **ウィークリー**: 中長期の弱点パターンを見つける（戦略レベル）
- **デイリー**: 行動ルールを守れたか即座に確認（戦術レベル）

---

## 10. FAQ対応

### Q1: 5局は必須ですか？
A: いいえ。5局は目安です。明確な改善が見えたら3局、変化が小さければ10局に調整可。

### Q2: カルテが毎回同じ弱点を指摘します
A: それは正常です。弱点が根深い証拠。行動ルールを見直すか、別角度からアプローチ。

### Q3: LLMの診断が一般論すぎます
A: カルテの内容を十分に貼り付けていない可能性。Weakness Hypothesis、Phase × Mistake Breakdown、Top Worst Moves は必須。

### Q4: デイリーコーチは毎局必要ですか？
A: いいえ。重要な対局、行動ルール確認、特に学びがあった対局のみ推奨（週1-2局が目安）。

---

## 11. Phase 9 の技術的特徴

### 11.1 設計方針

- **軽量化**: カルテは最小限の情報に絞る（重要局面 + 集計）
- **測定可能性**: 客観的な数値で改善を判定（損失の増減）
- **実行可能性**: 行動ルールは最大3つ（守れる範囲）
- **継続性**: 5ステップサイクルを回し続ける

### 11.2 LLM連携の最適化

- **ルート4（カルテ駆動）を推奨**: カルテ + プロンプト = 相談の質2-4倍以上
- **4つの入力ルート比較**:
  1. プロンプトのみ: 1倍（一般論）
  2. プロンプト + SGF/画像: 1.5-2倍
  3. プロンプト + 解析入りSGF: 非サポート
  4. プロンプト + カルテ: 2-4倍以上（推奨）

### 11.3 myKatrain の強み

- **KataGo解析の客観性**: 損失・勝率・重要度が数値化される
- **Phase × Mistake クロス集計**: 「どの局面で」「どの種類のミス」が多いか特定
- **弱点仮説の自動生成**: 上位2-3個に自動的に絞られる
- **Freedom 分析**: 手の自由度（選択肢の広さ）を考慮

---

## 12. Phase 9 完了後の状態

### 12.1 ユーザーができること

1. **ウィークリーコーチ**:
   - 10局打つ
   - Multi-game summary で `summary_互先_*.md` 生成
   - LLMに貼り付けて診断依頼
   - 行動ルール v01 を策定（最大3つ）

2. **デイリーコーチ**:
   - 重要な対局を打つ
   - Export Karte で `karte_*.md` 生成
   - LLMに貼り付けて振り返り（5分）
   - 行動ルール遵守を確認

3. **改善サイクル**:
   - 5局実践
   - 再カルテで改善測定
   - 改善/変化なし/悪化を判定
   - 次サイクルの行動ルールを決定

### 12.2 測定可能な指標

- **Middle gameの大悪手**: 8回 → 3回（-62.5%）
- **Middle gameの損失**: 52.1目 → 18.5目（-64.5%）
- **成功条件の達成**: 中盤の平均損失 30目以下、大悪手 3回以下

---

## 13. Phase 8 との関係

Phase 9 は Phase 8（初心者向けヒント）より優先されました。

**理由**:
- Phase 8 は「任意」機能（G0-G1向けの構造解析）
- ユーザー本人は G4（野狐4-5段）
- カルテ品質向上（Phase 5-7）→ LLM連携（Phase 9）の流れが優先度高い

Phase 8 は今後実装する場合も、Phase 9 の検証サイクルで効果測定可能。

---

## 14. まとめ

### 14.1 Phase 9 で確立したもの

- ✅ カルテ → LLM診断 → 行動ルール → 実践 → 再カルテ のサイクル
- ✅ 測定可能な成功条件（客観的な改善判定）
- ✅ 主テーマ1つ + 行動ルール最大3つ（実行可能な範囲）
- ✅ ウィークリーコーチとデイリーコーチの使い分け
- ✅ プロンプトテンプレート（3種類）
- ✅ 改善判定基準（改善/変化なし/悪化）

### 14.2 Phase 9 の意義

**myKatrain の価値提案**:
1. KataGo解析 → 客観的なカルテ生成（自動化）
2. カルテ → LLM診断（ルート4、質2-4倍以上）
3. 行動ルール → 5局実践 → 再カルテ（測定可能な改善）

これにより、**「測れる形で上達する」** という目標を達成。

### 14.3 次のステップ（任意）

- Phase 8: 初心者向けヒント（構造解析 + テンプレ）
- Phase 10+: クイズ/コーチUIの拡張

---

**最終更新**: 2025-12-31
**バージョン**: v1.0
**対応Phase**: Phase 9（検証テンプレで改善ループ）
